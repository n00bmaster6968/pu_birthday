<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Cutesy - My Pu Pu!</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* General Styling */
        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #E0F7FA, #B3E5FC);
            color: #4A4A4A;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            position: relative;
            overflow-x: hidden;
            overflow-y: hidden;
        }

        /* --- MODAL STYLES --- */
        #modalBackdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #passwordModal {
            background-color: #FFFFFF;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 350px;
            width: 90%;
            z-index: 9001;
        }

        #passwordModal h2 {
            font-family: 'Pacifico', cursive;
            color: #64B5F6;
            margin-bottom: 20px;
        }

        #passwordModal input[type="password"] {
            width: 90%;
            padding: 10px;
            margin-bottom: 15px;
            border: 2px solid #BBDEFB;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
        }

        #passwordModal button {
            background-color: #90CAF9;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            transition: background-color 0.3s;
        }

        #passwordModal button:hover {
            background-color: #64B5F6;
        }
        
        #error-message {
            color: #E91E63;
            margin-top: 10px;
            font-weight: 700;
            display: none;
        }
        /* --- END MODAL STYLES --- */


        /* Canvas for Confetti (Full Screen, Background) */
        #confettiCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        .container {
            background-color: #FFFFFF;
            margin: 30px 20px;
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            max-width: 700px;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
            position: relative;
            z-index: 100;
        }

        /* Header */
        header {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 2px dashed #BBDEFB;
            position: relative;
            z-index: 200; 
        }

        .main-title {
            font-family: 'Pacifico', cursive;
            font-size: 4em;
            color: #64B5F6;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
            position: relative;
            z-index: 201; 
        }

        .subtitle {
            font-family: 'Quicksand', sans-serif;
            font-size: 1.4em;
            color: #90CAF9;
            font-weight: 700;
        }
        
        /* Birthday Message Section */
        .birthday-message {
            margin-bottom: 35px;
            padding: 30px;
            background-color: #FFFDE7;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><defs><pattern id="stripes" width="100%" height="30" patternUnits="userSpaceOnUse"><line x1="0" y1="29" x2="100%" y2="29" stroke="%23ffe4e1" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="%23fffaf0"/><rect width="100%" height="100%" fill="url(%23stripes)"/></svg>');
            background-size: 100% 100%;
            border: 1px solid #FFCCBC;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .message-text, .message-text-greeting {
            font-size: 1.1em;
            color: #5C6BC0;
            margin-bottom: 15px;
            line-height: 1.8;
            font-weight: 500;
            text-align: left;
            overflow: hidden;
            white-space: pre-wrap;
        }
        
        .message-text-greeting {
            font-weight: 700;
            text-align: center; 
        }

        /* Cursor blinking effect */
        .message-text:after {
            content: '|';
            display: inline-block;
            animation: blink 0.7s infinite;
            margin-left: 2px;
            font-weight: 300;
        }
        .typed-done:after {
             content: '';
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .birthday-message-alert {
            font-size: 1.6em;
            font-weight: 700;
            color: #E91E63;
            background-color: #FFEBEE;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #F48FB1;
            animation: shake 0.8s infinite alternate;
            cursor: pointer; 
        }
        
        .not-birthday-message {
            font-size: 1.2em;
            font-weight: 500;
            color: #4863A0;
            padding: 10px;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-1deg); }
            75% { transform: translateX(5px) rotate(1deg); }
            100% { transform: translateX(0); }
        }

        .signature {
            font-style: normal;
            text-align: right;
            margin-top: 25px;
            color: #42A5F5;
            font-weight: 700;
        }

        /* Countdown Section */
        .countdown-section {
            margin-bottom: 15px; 
            padding: 8px 12px; 
            background-color: #E1F5FE;
            border-radius: 8px; 
            border: 2px dotted #81D4FA;
        }

        .countdown-title {
            font-size: 1.5em; 
            color: #2196F3;
            margin-bottom: 5px; 
            margin-top: 5px; 
        }

        .countdown-timer {
            font-size: 1.4em; 
            font-weight: bold;
            color: #1976D2;
            letter-spacing: 1.5px; 
            background-color: #BBDEFB;
            padding: 6px 15px; 
            border-radius: 6px; 
            display: inline-block;
            animation: pulse 1.5s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }
        
        .garland-wrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; 
            z-index: 150; 
            pointer-events: none;
            overflow: hidden; 
        }
        
        .bunting-garland {
            position: absolute;
            height: 100%; 
            width: 100%;
            display: flex;
            justify-content: space-around;
            transition: all 0.5s ease-out; 
        }
        
        .bunting-garland::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #8D8D8D; 
            transform-origin: 0 0;
            z-index: 1;
            opacity: 0;
        }
        

        .garland-wrap .layer-1 { top: 10px; left: -10%; width: 120%; }
        .garland-wrap .layer-1::before { transform: rotateZ(5deg); }
        
        .garland-wrap .layer-2 { top: 70px; left: -5%; width: 110%; }
        .garland-wrap .layer-2::before { transform: rotateZ(-3deg); animation-delay: -1.5s; }
        

        .bunting {
            position: relative;
            width: 0;
            height: 0;
            margin: 0 5px;
            animation: sway 5s infinite ease-in-out alternate; 
            filter: drop-shadow(0 4px 3px rgba(0, 0, 0, 0.1));
            top: 0px; 
            z-index: 5;
        }

        .bunting::before {
            content: '';
            position: absolute;
            top: 0;
            left: -15px; 
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 30px solid var(--bunting-color, #FFCDD2); 
            transform: rotateZ(3deg);
        }

        .bunting:nth-child(even) { animation-duration: 4.5s; }
        .bunting:nth-child(odd) { animation-duration: 5.5s; }
        .bunting:nth-child(4n) { animation-delay: -2s; }

        @keyframes sway {
            0% { transform: translateY(0) translateX(0) rotateZ(0deg); }
            100% { transform: translateY(10px) translateX(10px) rotateZ(5deg); }
        }

        /* Footer */
        footer {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px dashed #BBDEFB;
            color: #9E9E9E;
            font-size: 0.9em;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                margin: 20px 15px;
                padding: 30px;
            }
            .main-title {
                font-size: 2.8em; 
            }
        }
        
        @media (max-width: 600px) {
            .main-title {
                font-size: 2.5em; 
                line-height: 1.1; 
            }
            .garland-wrap .layer-1 { top: 0px; left: 0%; width: 100%; }
            .garland-wrap .layer-2 { top: 30px; left: 0%; width: 100%; }
            .bunting { margin: 0 2px; }
            .bunting::before { 
                border-left: 10px solid transparent;
                border-right: 10px solid transparent;
                border-bottom: 20px solid var(--bunting-color, #FFCDD2); 
            }
        }
        
        @media (max-width: 450px) {
            .main-title {
                font-size: 2.5em; 
                line-height: 1.1;
            }
            .subtitle {
                font-size: 1.2em;
            }
            .garland-wrap .layer-1 { top: -5px; left: 0%; width: 100%; }
            .garland-wrap .layer-2 { top: 20px; left: 0%; width: 100%; }
            .bunting { margin: 0 1px; }
            .bunting::before { 
                border-left: 8px solid transparent;
                border-right: 8px solid transparent;
                border-bottom: 16px solid var(--bunting-color, #FFCDD2); 
            }
        }
    </style>
</head>
<body>
    
    <div id="modalBackdrop">
        <div id="passwordModal">
            <h2>Hmmm, password ü§î</h2>
            <form id="passwordForm">
                <input type="password" id="passwordInput" placeholder="Our secret password" required>
                <button type="submit">Open the card!</button>
            </form>
            <p id="error-message">ehhhhhhh, wrong</p>
        </div>
    </div>
    <audio id="birthdayMusic" loop preload="auto" style="display: none;" src="for_you.mp3" type="audio/mpeg">
    </audio>

    <div class="garland-wrap">
        <div class="bunting-garland layer-1">
            <div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div>
        </div>
        <div class="bunting-garland layer-2">
            <div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div><div class="bunting"></div>
        </div>
    </div>
    
    <canvas id="confettiCanvas"></canvas>
    
    <div class="container">
        <header>
            <h1 class="main-title">Happy 
                Birthday, 
            <br> my dear!</br></h1>
            <p class="subtitle">‚ú® Always Be Yourself, You're Always Beloved! ‚ú®</p>
        </header>

        <section class="birthday-message">
            <div id="messageContent">
                </div>
            
            <div id="hiddenMessageTemplate" style="display:none;">
                <p class="message-text-greeting">G·ª≠i Pu c·ªßa tao,</p>
                <p class="message-text">Happy birthday, my dearest soulmate! </p>
                <p class="message-text">Tu·ªïi m·ªõi mang theo nhi·ªÅu ni·ªÅm vui m·ªõi v√† h√£y nh·ªõ l√† ƒëang c√≥ h√†ng t√° nh·ªØng ƒëi·ªÅu t∆∞∆°i ƒë·∫πp ch·ªù m√†y kh√°m ph√° s·∫Øp t·ªõi. C√¥ng vi·ªác th√¨ thu·∫≠n bu·ªìm xu√¥i gi√≥, xu√¥i ch√®o m√°t m√°i! D√π l·ª° g·∫∑p kh√≥ khƒÉn g√¨ ƒëi ch·∫≥ng n·ªØa th√¨ c≈©ng d·ªÖ d√†ng v∆∞·ª£t qua.</p>
                <p class="message-text">Qua ‚Äútu·ªïi 17‚Äù r·ªìi ƒë√≥, nh·ªõ gi·ªØ g√¨n s·ª©c kh·ªèe cho c·∫©n th·∫≠n ƒë·ªÉ c√≤n c√≥ s·ª©c m√† "b·∫ª g√£y" h·∫øt m·∫•y c√°i s·ª´ng tr√¢u ƒëang c·∫£n ƒë∆∞·ªùng.</p>
                <p class="message-text">B∆∞·ªõc sang tu·ªïi m·ªõi, s·∫Øc ƒë·∫πp c·ªßa m√†y ph·∫£i "v∆∞·ª£t m·∫∑t" m·∫•y b√© Pu c·ªßa nh·ªØng nƒÉm tr∆∞·ªõc, ph·∫£i lu√¥n l√† phi√™n b·∫£n ƒë·∫πp nh·ª©t c·ªßa m√¨nh. C√≥ l·ª° bu·ªìn g√¨ ƒë√≥ th√¨ c≈©ng ph·∫£i ƒë·∫πp t·∫°i ƒë·∫πp n√≥ m·ªõi h·∫øt bu·ªìn l·∫π ƒë∆∞·ª£c.</p>
                <p class="message-text">Sau s·ª©c kh·ªèe, s·∫Øc ƒë·∫πp, v√† c√¥ng vi·ªác, mong m√†y g·∫∑p ƒë∆∞·ª£c m·ªôt "ng∆∞·ªùi ·∫•y" th·∫≠t h·ª£p t√≠nh, m·ªôt ng∆∞·ªùi tr√¢n tr·ªçng m√†y, m·ªôt ng∆∞·ªùi th∆∞∆°ng m√†y h·∫øt m·ª©c, m·ªôt ng∆∞·ªùi ch·∫•p nh·∫≠n m√†y l√† m√†y v√† quan tr·ªçng l√† c√πng m√†y tr·ªü n√™n t·ªët h∆°n m·ªói ng√†y.</p>
                <p class="message-text">D√π c√≥ s√≥ng gi√≥ ƒë·∫øn ƒë√¢u, tao v·∫´n lu√¥n mu·ªën m√†y gi·ªØ v·ªØng s·ª± t·ª± tin v√†o b·∫£n th√¢n, h√£y lu√¥n l√† Uy√™n m√† tao bi·∫øt.</p>
                <p class="message-text">Th∆∞∆°ng m√†y nh·ª©t!</p>
                <p class="message-text signature">Deine Frau</p>
                <p class="message-text signature" style="margin-top: -10px;">You_know_who</p>
            </div>
        </section>

        <section class="countdown-section">
            <h2 class="countdown-title">Count down (07/11):</h2>
            <div id="countdown" class="countdown-timer"></div>
        </section>

        <footer>
            <p>¬© Only for my husband, DNPU! ‚ù§Ô∏è</p>
        </footer>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const HASHED_PASSWORD = '5923ad2ab9b45965334e66761fba8e7c5f427aeb8619168568ff9bc6dc876a61'; 

        // --- Configuration ---
        const BIRTHDAY_MONTH = 10; // nov 11 (0-indexed)
        const BIRTHDAY_DAY = 5; 
        const TYPING_SPEED = 14; 
        const MUSIC_START_TIME = 105; 
        
        // --- Element references ---
        const messageContainer = document.getElementById('messageContent');
        const hiddenMessageTemplate = document.getElementById('hiddenMessageTemplate');
        const countdownElement = document.getElementById('countdown');
        const birthdayMusic = document.getElementById('birthdayMusic'); 
        const modalBackdrop = document.getElementById('modalBackdrop');
        const passwordForm = document.getElementById('passwordForm');
        const passwordInput = document.getElementById('passwordInput');
        const errorMessage = document.getElementById('error-message');

        let isBirthday = false;
        let isMessageExpanded = false; 
        
        // --- PASSWORD HASHING FUNCTION (SHA-256) ---
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        async function checkPassword(event) {
            event.preventDefault();
            const enteredPassword = passwordInput.value;
            const enteredHash = await sha256(enteredPassword);

            if (enteredHash === HASHED_PASSWORD) {
                unlockCard();
            } else {
                errorMessage.style.display = 'block';
                passwordInput.value = ''; 
            }
        }
        
        function unlockCard() {
            modalBackdrop.style.display = 'none';
            document.body.style.overflowY = 'auto';

            setInterval(addConfetti, 1500 / (MAX_CONFETTI / 5));
            animateConfetti();
            
            setInterval(updateUI, 1000);
            updateUI(); 
            
        }
        
        passwordForm.addEventListener('submit', checkPassword);
        
        
        // --- Confetti Logic ---
        const canvas = document.getElementById('confettiCanvas');
        const ctx = canvas.getContext('2d');
        let confettiPieces = [];
        const MAX_CONFETTI = 50; 
        const CONFETTI_COLORS = ['#ADD8E6', '#B0E0E6', '#87CEEB', '#6A5ACD', '#C6E2FF', '#D8BFD8', '#FFCCBC', '#F48FB1'];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        class Confetti {
            constructor() {
                this.x = random(0, canvas.width);
                this.y = random(-20, -10);
                this.size = random(5, 12);
                this.color = CONFETTI_COLORS[Math.floor(random(0, CONFETTI_COLORS.length))];
                this.tilt = random(0, 10);
                this.tiltAngle = 0;
                this.tiltAngleSpeed = random(0.05, 0.15);
                this.speed = random(2, 5);
                this.wobble = random(0, 5);
            }

            update(index) {
                this.x += Math.sin(this.wobble) * 0.5;
                this.y += this.speed;
                this.tiltAngle += this.tiltAngleSpeed;
                this.wobble += 0.1;
                this.tilt = Math.sin(this.tiltAngle) * 5;

                if (this.y > canvas.height) {
                    confettiPieces.splice(index, 1);
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x + this.tilt / 2, this.y);
                ctx.rotate(this.tiltAngle);
                ctx.fillStyle = this.color;
                ctx.fillRect(0, 0, this.size, this.size / 2); 
                ctx.restore();
            }
        }

        function addConfetti() {
            if (confettiPieces.length < MAX_CONFETTI) {
                confettiPieces.push(new Confetti());
            }
        }
        
        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); 
            
            for (let i = confettiPieces.length - 1; i >= 0; i--) {
                confettiPieces[i].update(i);
                confettiPieces[i].draw();
            }

            requestAnimationFrame(animateConfetti);
        }
        
        const BUNTING_COLORS = ['#EF9A9A', '#B39DDB', '#80CBC4', '#FFECB3', '#9FA8DA', '#F48FB1', '#A5D6A7', '#FFD180', '#E6EE9C', '#CFD8DC'];

        function assignRandomBuntingColors() {
            const allBuntings = document.querySelectorAll('.bunting');
            allBuntings.forEach(bunting => {
                const randomColor = BUNTING_COLORS[Math.floor(Math.random() * BUNTING_COLORS.length)];
                bunting.style.setProperty('--bunting-color', randomColor); 
            });
        }

        function typeMessage(elements, elementIndex = 0, charIndex = 0) {
            if (elementIndex >= elements.length) {
                elements[elements.length - 1].classList.add('typed-done'); 
                return;
            }

            const currentElement = elements[elementIndex];
            const fullText = currentElement.getAttribute('data-full-text');
            
            if (charIndex < fullText.length) {
                currentElement.textContent += fullText.charAt(charIndex);
                charIndex++;
                setTimeout(() => typeMessage(elements, elementIndex, charIndex), TYPING_SPEED);
            } else {
                if (currentElement.classList.contains('message-text') || currentElement.classList.contains('message-text-greeting')) {
                    currentElement.classList.add('typed-done');
                }
                setTimeout(() => typeMessage(elements, elementIndex + 1, 0), TYPING_SPEED * 15);
            }
        }

        function revealMessageWithTyping() {
            const children = Array.from(hiddenMessageTemplate.children).map(node => node.cloneNode(true));
            
            children.forEach(element => {
                element.setAttribute('data-full-text', element.textContent);
                element.textContent = '';
                messageContainer.appendChild(element);
            });
            
            typeMessage(children);
        }

        function playMusicFromStart() {
            if (birthdayMusic && birthdayMusic.src) {
                birthdayMusic.currentTime = MUSIC_START_TIME;
                birthdayMusic.volume = 0.6; 
                
                birthdayMusic.play().catch(error => {
                    console.log("Auto-play was prevented. User needs to interact again or check music URL.", error);
                });
            } else {
                 console.log("No music source found or audio element not ready. Check the 'src' attribute.");
            }
        }


        // --- Real-time Date Check and UI Update ---
        function updateUI() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            isBirthday = now.getMonth() === BIRTHDAY_MONTH && now.getDate() === BIRTHDAY_DAY; 
            
            if (!isMessageExpanded) { 
                if (isBirthday) {
                    messageContainer.innerHTML = `
                        <p class="birthday-message-alert">
                            This is the date, **Ch·ªìng iuuuu** please click me ‚ù§Ô∏è
                        </p>
                    `;
                } else {
                    messageContainer.innerHTML = `
                        <p class="not-birthday-message">
                            It's not been your birthday yet, 
                            there's nothing here, you curious little kitty ‚âΩ^‚Ä¢‡ºö‚Ä¢ ‡æÄ‡Ω≤‚âº
                        </p>
                    `;
                }
            }
            
            // --- Countdown Logic ---
            let birthday = new Date(currentYear, BIRTHDAY_MONTH, BIRTHDAY_DAY);
            
            if (now > birthday) {
                if (!isBirthday) {
                    birthday = new Date(currentYear + 1, BIRTHDAY_MONTH, BIRTHDAY_DAY);
                }
            }

            const distance = birthday - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            if (countdownElement) {
                if (distance < 0 || isBirthday) {
                    countdownElement.innerHTML = "üéâ TODAY IS PU'S BIRTHDAY üéâ";
                } else {
                    countdownElement.innerHTML = `${days} DAY(s) ${hours} HOUR(s) ${minutes} MINUTE(s) ${seconds} SEC(s)`;
                }
            }
        }

        document.querySelector('.birthday-message').addEventListener('click', () => {
            if (isBirthday && !isMessageExpanded) {
                isMessageExpanded = true; 
                messageContainer.innerHTML = '';
                
                playMusicFromStart(); 
                
                revealMessageWithTyping();
            }
        });
        
        resizeCanvas();
        assignRandomBuntingColors();
        
    });
</script>
</body>
</html>
